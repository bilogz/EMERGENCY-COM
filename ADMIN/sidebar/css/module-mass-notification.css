        /* Enhanced Mass Notification Styles (theme-synced) */
        :root {
            --mn-shadow: 0 8px 20px rgba(15, 23, 42, 0.14);
            --mn-shadow-hover: 0 12px 26px rgba(15, 23, 42, 0.18);
            --mn-t: 200ms;
            --mn-ease: cubic-bezier(0.2, 0.8, 0.2, 1);

            /* severity accents (kept semantic; UI adapts to theme surfaces automatically) */
            --mn-low: #10b981;
            --mn-medium: #f59e0b;
            --mn-high: #f97316;
            --mn-critical: #ef4444;

            /* analytics accents (derived from brand primary so it auto-syncs with the logo/theme) */
            --mn-accent-1: var(--primary-color-1);
            --mn-accent-2: color-mix(in srgb, var(--primary-color-1) 62%, var(--text-color-1) 38%);
            --mn-accent-3: color-mix(in srgb, var(--primary-color-1) 58%, var(--bg-color-1) 42%);
            --mn-accent-4: color-mix(in srgb, var(--primary-color-1) 70%, transparent);
        }

        .title h1 i {
            color: var(--primary-color-1) !important;
        }

        /* Guided stepper */
        .mn-stepper {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem;
            border: 1px solid var(--border-color-1);
            border-radius: 14px;
            background: color-mix(in srgb, var(--card-bg-1) 72%, transparent);
            margin: 0 0 1.25rem 0;
        }

        .mn-step {
            display: flex;
            align-items: center;
            gap: 0.6rem;
            padding: 0.55rem 0.75rem;
            border-radius: 999px;
            border: 1px solid transparent;
            color: var(--text-secondary-1);
            font-weight: 700;
            font-size: 0.9rem;
            transition: background-color var(--mn-t) var(--mn-ease), border-color var(--mn-t) var(--mn-ease), color var(--mn-t) var(--mn-ease);
            user-select: none;
        }

        .mn-step .mn-step-num {
            width: 26px;
            height: 26px;
            border-radius: 999px;
            display: grid;
            place-items: center;
            background: color-mix(in srgb, var(--bg-color-1) 55%, var(--card-bg-1) 45%);
            border: 1px solid var(--border-color-1);
            color: var(--text-color-1);
            font-size: 0.85rem;
            font-weight: 800;
        }

        .mn-step.is-active {
            background: color-mix(in srgb, var(--primary-color-1) 16%, transparent);
            border-color: color-mix(in srgb, var(--primary-color-1) 32%, transparent);
            color: var(--text-color-1);
        }

        .mn-step.is-done {
            color: var(--text-color-1);
        }

        .mn-step.is-done .mn-step-num {
            background: var(--primary-color-1);
            border-color: var(--primary-color-1);
            color: #fff;
        }

        .mn-step-sep {
            flex: 1;
            height: 1px;
            background: color-mix(in srgb, var(--border-color-1) 75%, transparent);
        }

        .dispatch-grid {
            display: grid;
            grid-template-columns: 1.2fr 1fr;
            gap: 1.5rem;
            align-items: start;
        }

        .module-card {
            background: var(--card-bg-1);
            border-radius: 14px;
            box-shadow: 0 1px 0 rgba(255,255,255,0.03);
            border: 1px solid var(--border-color-1);
            overflow: hidden;
            margin-bottom: 1.5rem;
            transition: box-shadow var(--mn-t) var(--mn-ease), border-color var(--mn-t) var(--mn-ease);
        }

        .module-card:hover {
            box-shadow: var(--mn-shadow);
            border-color: color-mix(in srgb, var(--primary-color-1) 16%, var(--border-color-1));
        }

        .module-card-header {
            padding: 1.25rem 1.5rem;
            border-bottom: 1px solid var(--border-color-1);
            background: color-mix(in srgb, var(--header-bg-1) 72%, transparent);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .module-card-header h2 {
            margin: 0;
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--text-color-1);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .module-card-body {
            padding: 1.5rem;
        }

        .mn-help {
            margin-top: 0.4rem;
            color: var(--text-secondary-1);
            font-size: 0.85rem;
            line-height: 1.4;
        }

        .gemini-logo {
            width: 16px;
            height: 16px;
            vertical-align: -2px;
            margin-right: 0.5rem;
            display: inline-block;
        }

        @keyframes mnSpin {
            to { transform: rotate(360deg); }
        }

        /* Inline loading indicator (used for address lookup + map address) */
        .mn-help.is-loading,
        #mnMapSelectedAddress.is-loading {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .mn-help.is-loading::before,
        #mnMapSelectedAddress.is-loading::before {
            content: "";
            width: 14px;
            height: 14px;
            border-radius: 999px;
            border: 2px solid color-mix(in srgb, var(--border-color-1) 55%, transparent);
            border-top-color: var(--primary-color-1);
            animation: mnSpin 0.85s linear infinite;
            flex: 0 0 auto;
        }

        .btn.is-loading {
            pointer-events: none;
            opacity: 0.92;
        }

        .btn.is-loading::after {
            content: "";
            width: 14px;
            height: 14px;
            border-radius: 999px;
            border: 2px solid color-mix(in srgb, currentColor 35%, transparent);
            border-top-color: currentColor;
            animation: mnSpin 0.85s linear infinite;
            display: inline-block;
            margin-left: 0.55rem;
            vertical-align: -2px;
        }
        /* Avoid double spinners on AI suggest button (it has its own inline spinner) */
        #mnAiAssistBtn.is-loading::after {
            content: none;
            display: none;
        }

        .form-group {
            margin-bottom: 1.25rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--text-color-1);
            font-size: 0.9rem;
        }

        /* Fix "arrow loop" (conflicting global form styles). Force a single, clean chevron for wizard selects. */
        #dispatchForm select.form-control {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            background-color: var(--bg-color-1);
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%2371775c'%3E%3Cpath d='M7 10l5 5 5-5z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 0.85rem center;
            background-size: 20px;
            padding-right: 2.75rem;
        }

        #dispatchForm select.form-control:focus {
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%234c8a89'%3E%3Cpath d='M7 10l5 5 5-5z'/%3E%3C/svg%3E");
        }

        #dispatchForm select.form-control::-ms-expand {
            display: none;
        }

        .channel-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 0.75rem;
        }

        .channel-checkbox {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            padding: 1rem 0.5rem;
            border: 1px solid var(--border-color-1);
            border-radius: 8px;
            cursor: pointer;
            transition: transform var(--mn-t) var(--mn-ease), background-color var(--mn-t) var(--mn-ease), border-color var(--mn-t) var(--mn-ease), box-shadow var(--mn-t) var(--mn-ease), color var(--mn-t) var(--mn-ease);
            background: var(--card-bg-1);
            text-align: center;
            min-height: 92px;
        }

        .channel-checkbox:hover {
            border-color: var(--primary-color-1);
            background: color-mix(in srgb, var(--primary-color-1) 10%, transparent);
        }

        .channel-checkbox.selected {
            background: color-mix(in srgb, var(--primary-color-1) 16%, transparent);
            color: var(--text-color-1);
            border-color: color-mix(in srgb, var(--primary-color-1) 42%, transparent);
            box-shadow: 0 6px 14px rgba(15, 23, 42, 0.14);
        }

        .channel-checkbox i {
            font-size: 1.5rem;
            margin-bottom: 0.25rem;
            color: var(--primary-color-1);
        }

        .channel-checkbox.selected i {
            color: var(--primary-color-1);
        }

        .severity-options {
            display: flex;
            gap: 0.5rem;
            background: color-mix(in srgb, var(--bg-color-1) 60%, transparent);
            padding: 0.35rem;
            border-radius: 999px;
            border: 1px solid var(--border-color-1);
        }

        .severity-radio {
            flex: 1;
            text-align: center;
            padding: 0.65rem 0.5rem;
            border-radius: 999px;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.85rem;
            transition: background-color var(--mn-t) var(--mn-ease), color var(--mn-t) var(--mn-ease), box-shadow var(--mn-t) var(--mn-ease), transform var(--mn-t) var(--mn-ease);
            color: var(--text-secondary-1);
            user-select: none;
        }

        .severity-radio:hover {
            background: color-mix(in srgb, var(--text-color-1) 6%, transparent);
        }

        .severity-radio.selected {
            color: #fff;
            box-shadow: 0 6px 14px rgba(15, 23, 42, 0.18);
        }

        .severity-radio.low.selected { background: var(--mn-low); }
        .severity-radio.medium.selected { background: var(--mn-medium); }
        .severity-radio.high.selected { background: var(--mn-high); }
        .severity-radio.critical.selected { background: var(--mn-critical); }

        .preview-box {
            background: color-mix(in srgb, var(--bg-color-1) 55%, var(--card-bg-1) 45%);
            border: 1px solid var(--border-color-1);
            border-radius: 14px;
            padding: 1.25rem;
            margin-top: 1.5rem;
            position: relative;
            overflow: hidden;
            box-shadow: 0 8px 18px rgba(15, 23, 42, 0.1);
        }
        
        [data-theme="dark"] .preview-box {
            background: rgba(255,255,255,0.05);
            box-shadow: 0 10px 24px rgba(0, 0, 0, 0.32);
        }

        .preview-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            border-bottom: 1px solid color-mix(in srgb, var(--border-color-1) 70%, transparent);
            padding-bottom: 0.75rem;
            gap: 0.75rem;
        }

        .preview-label {
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--text-secondary-1);
        }

        .category-preview-pill {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.35rem 0.75rem;
            border-radius: 20px;
            color: white;
            font-weight: 600;
            font-size: 0.8rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .preview-content {
            font-weight: 600;
            color: var(--text-color-1);
            font-size: 1rem;
            line-height: 1.4;
        }

        .preview-body-text {
            margin-top: 0.5rem;
            font-size: 0.9rem;
            color: var(--text-secondary-1);
            line-height: 1.5;
        }

        .char-counter {
            text-align: right;
            font-size: 0.75rem;
            color: var(--text-secondary-1);
            margin-top: 0.5rem;
            font-weight: 500;
        }

        /* Preview modes */
        .mn-preview-modes {
            display: inline-flex;
            gap: 6px;
            padding: 6px;
            border: 1px solid var(--border-color-1);
            border-radius: 999px;
            background: color-mix(in srgb, var(--card-bg-1) 70%, transparent);
        }

        .mn-preview-mode {
            border: 1px solid transparent;
            background: transparent;
            color: var(--text-secondary-1);
            font-weight: 800;
            font-size: 0.78rem;
            padding: 0.35rem 0.6rem;
            border-radius: 999px;
            cursor: pointer;
            transition: background-color var(--mn-t) var(--mn-ease), color var(--mn-t) var(--mn-ease), border-color var(--mn-t) var(--mn-ease);
        }

        .mn-preview-mode.is-active {
            background: var(--primary-color-1);
            color: #fff;
            border-color: var(--primary-color-1);
        }

        .mn-preview-hint {
            margin-top: 0.6rem;
            padding: 0.65rem 0.8rem;
            border-radius: 10px;
            border: 1px solid color-mix(in srgb, var(--primary-color-1) 22%, var(--border-color-1));
            background: color-mix(in srgb, var(--primary-color-1) 10%, transparent);
            color: var(--text-secondary-1);
            font-size: 0.85rem;
        }

        .mn-cta-reason {
            font-size: 0.85rem;
            color: var(--text-secondary-1);
            display: none;
        }

        .mn-cta-reason.is-visible {
            display: block;
        }

        /* Wizard modal wrapper */
        .mn-modal-backdrop {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.62);
            z-index: 1500;
            display: none;
            align-items: center;
            justify-content: center;
            padding: 18px;
        }

        .mn-modal-backdrop.show { display: flex; }

        .mn-modal {
            width: min(1100px, 100%);
            max-height: calc(100vh - 36px);
            background: var(--card-bg-1);
            border: 1px solid var(--border-color-1);
            border-radius: 18px;
            overflow: hidden;
            box-shadow: 0 16px 42px rgba(0, 0, 0, 0.35);
            display: flex;
            flex-direction: column;
        }

        .mn-modal-header {
            padding: 1.1rem 1.25rem;
            background: color-mix(in srgb, var(--primary-color-1) 22%, transparent);
            border-bottom: 1px solid color-mix(in srgb, var(--primary-color-1) 28%, var(--border-color-1));
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
            gap: 1rem;
        }

        .mn-modal-title {
            margin: 0;
            font-size: 1.2rem;
            font-weight: 800;
            color: var(--text-color-1);
            line-height: 1.15;
        }

        .mn-modal-subtitle {
            margin-top: 6px;
            color: var(--text-secondary-1);
            font-size: 0.92rem;
        }

        .mn-modal-close {
            width: 44px;
            height: 44px;
            border-radius: 12px;
            border: 1px solid var(--border-color-1);
            background: transparent;
            color: var(--text-color-1);
            cursor: pointer;
        }

        .mn-modal-body {
            padding: 1.25rem;
            overflow: auto;
            background: var(--bg-color-1);
        }

        .mn-modal-grid {
            display: grid;
            grid-template-columns: 1.3fr 0.9fr;
            gap: 1.25rem;
            align-items: start;
        }

        @supports (background: radial-gradient(circle at 50% 0%, #000, #000)) {
            .mn-modal-body {
                background:
                    radial-gradient(900px 420px at 20% 0%,
                        color-mix(in srgb, var(--primary-color-1) 10%, transparent),
                        transparent 60%
                    ),
                    radial-gradient(700px 380px at 80% 10%,
                        color-mix(in srgb, var(--text-color-1) 6%, transparent),
                        transparent 55%
                    ),
                    var(--bg-color-1);
            }
        }

        .mn-modal-left {
            min-width: 0;
        }

        .mn-modal-right {
            position: sticky;
            top: 0;
            align-self: start;
        }

        @media (max-width: 992px) {
            .mn-modal-grid {
                grid-template-columns: 1fr;
            }

            .mn-modal-right {
                position: static;
            }
        }

        .mn-modal-footer {
            padding: 1rem 1.25rem;
            border-top: 1px solid var(--border-color-1);
            background: var(--header-bg-1);
            display: flex;
            gap: 0.75rem;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }

        .mn-confirm-backdrop {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.45);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 9999;
        }
        .mn-confirm-backdrop.show { display: flex; }
        .mn-confirm {
            background: var(--card-bg-1);
            color: var(--text-color-1);
            border-radius: 18px;
            box-shadow: var(--mn-shadow);
            width: min(520px, 92vw);
            border: 1px solid var(--border-color-1);
            overflow: hidden;
        }
        .mn-confirm-header {
            padding: 1rem 1.25rem;
            border-bottom: 1px solid var(--border-color-1);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        .mn-confirm-title {
            margin: 0;
            font-size: 1.05rem;
            font-weight: 700;
        }
        .mn-confirm-body {
            padding: 1rem 1.25rem;
            font-size: 0.95rem;
            color: var(--text-secondary-1);
        }
        .mn-confirm-actions {
            padding: 0.9rem 1.25rem 1.1rem;
            display: flex;
            gap: 0.6rem;
            justify-content: flex-end;
        }
        .mn-confirm-close {
            width: 34px;
            height: 34px;
            border-radius: 10px;
            border: 1px solid var(--border-color-1);
            background: var(--bg-color-1);
            color: var(--text-secondary-1);
            cursor: pointer;
        }

        #mnAiAssistBtn.is-loading {
            opacity: 0.7;
            pointer-events: none;
        }
        #mnAiAssistBtn .mn-ai-spinner {
            display: none;
            width: 14px;
            height: 14px;
            border: 2px solid rgba(0,0,0,0.15);
            border-top-color: var(--primary-color-1);
            border-radius: 50%;
            margin-left: 8px;
            animation: mnSpin 0.8s linear infinite;
        }
        #mnAiAssistBtn.is-loading .mn-ai-spinner {
            display: inline-block;
        }

        /* Wizard step visibility (only when modal is open) */
        #dispatchForm.mn-in-wizard .module-card { display: none; }
        #dispatchForm.mn-in-wizard .module-card.mn-step-active { display: block; }

        /* Wizard layout: prevent "empty column" gaps when only one step card is visible */
        #dispatchForm.mn-in-wizard .dispatch-grid {
            grid-template-columns: 1fr !important;
            gap: 1rem !important;
        }

        #dispatchForm.mn-in-wizard .dispatch-left,
        #dispatchForm.mn-in-wizard .dispatch-right {
            grid-column: 1 / -1 !important;
        }

        #dispatchForm.mn-in-wizard .module-card {
            margin-bottom: 0 !important;
        }

        /* Make the wizard stepper feel like a professional segmented control */
        .mn-modal-left .mn-stepper {
            margin: 0 0 1rem 0;
            background: color-mix(in srgb, var(--card-bg-1) 86%, transparent);
            border-radius: 16px;
            box-shadow: 0 6px 16px rgba(15, 23, 42, 0.1);
            position: sticky;
            top: 0;
            z-index: 2;
            backdrop-filter: blur(4px);
        }

        .mn-modal-left .mn-step {
            flex: 1;
            justify-content: center;
        }

        .mn-draft-status {
            font-size: 0.85rem;
            color: var(--text-secondary-1);
            font-weight: 800;
            opacity: 0;
            transform: translateY(2px);
            transition: opacity 180ms ease, transform 180ms ease;
            user-select: none;
        }

        .mn-draft-status.is-visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* Analytics cards */
        .mn-mini-analytics {
            display: grid;
            grid-template-columns: repeat(4, minmax(0, 1fr));
            gap: 1rem;
            margin: 1.25rem 0 1.25rem;
        }

        .mn-stat {
            border: 0;
            border-radius: 14px;
            padding: 1rem;
            position: relative;
            overflow: hidden;
            transition: transform var(--mn-t) var(--mn-ease), box-shadow var(--mn-t) var(--mn-ease);
            box-shadow: 0 10px 22px rgba(15, 23, 42, 0.14);
            color: #fff;
            z-index: 0;
        }

        .mn-stat::before {
            content: "";
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, var(--mn-a), var(--mn-b));
            opacity: 1;
            z-index: 0;
        }

        .mn-stat::after {
            content: "";
            position: absolute;
            inset: -40% -20% auto -20%;
            height: 220%;
            background:
                radial-gradient(closest-side, rgba(255,255,255,0.28), transparent 70%),
                radial-gradient(closest-side, rgba(0,0,0,0.12), transparent 72%);
            transform: rotate(18deg);
            opacity: 0.32;
            pointer-events: none;
            z-index: 0;
        }

        .mn-stat > * {
            position: relative;
            z-index: 1;
        }

        .mn-stat:hover {
            transform: translateY(-1px);
            box-shadow: 0 14px 28px rgba(15, 23, 42, 0.18);
        }

        .mn-stat-top {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 0.75rem;
        }

        .mn-stat-label::after {
            content: "";
            display: block;
            margin-top: 0.75rem;
            width: 86px;
            height: 14px;
            border-radius: 8px;
            background: rgba(255,255,255,0.18);
            border: 1px solid rgba(255,255,255,0.16);
        }

        .mn-stat-icon {
            position: absolute;
            right: 16px;
            top: 14px;
            width: 56px;
            height: 56px;
            border-radius: 16px;
            display: grid;
            place-items: center;
            background: rgba(255, 255, 255, 0.10);
            border: 1px solid rgba(255, 255, 255, 0.18);
            color: rgba(255, 255, 255, 0.70);
            flex: 0 0 auto;
            font-size: 1.55rem;
            z-index: 2;
        }

        .mn-stat--total { --mn-a: #00c853; --mn-b: #00a152; }
        .mn-stat--done { --mn-a: #00b0ff; --mn-b: #2979ff; }
        .mn-stat--progress { --mn-a: #ff6d00; --mn-b: #ff3d00; }
        .mn-stat--rate { --mn-a: #aa00ff; --mn-b: #7b1fa2; }

        .mn-stat-label {
            color: rgba(255, 255, 255, 0.88);
            font-weight: 800;
            font-size: 0.72rem;
            letter-spacing: 0.08em;
            text-transform: uppercase;
        }

        .mn-stat-value {
            margin-top: 0.55rem;
            font-size: 1.55rem;
            font-weight: 900;
            color: #fff;
            display: flex;
            align-items: baseline;
            gap: 0.5rem;
        }

        /* Override legacy inline styles inside stat values */
        .mn-stat .mn-stat-value span[style] {
            color: rgba(255, 255, 255, 0.88) !important;
            font-weight: 900 !important;
        }

        .mn-stat-sub {
            margin-top: 4px;
            color: rgba(255, 255, 255, 0.82);
            font-size: 0.85rem;
        }

        /* Process flow (diagram style) */
        .mn-process {
            border: 1px solid var(--border-color-1);
            border-radius: 16px;
            background: color-mix(in srgb, var(--card-bg-1) 80%, transparent);
            padding: 1.25rem;
            margin: 0 0 1.25rem;
            box-shadow: 0 8px 18px rgba(15, 23, 42, 0.1);
        }

        .mn-process-title {
            margin: 0 0 1rem 0;
            font-size: 1.1rem;
            font-weight: 900;
            color: var(--text-color-1);
            text-align: center;
        }

        .mn-process-track {
            display: flex;
            align-items: stretch;
            justify-content: space-between;
            gap: 1rem;
        }

        .mn-process-step {
            flex: 1;
            display: grid;
            justify-items: center;
            text-align: center;
            gap: 0.35rem;
            padding: 0.75rem 0.5rem;
            border-radius: 14px;
            background: color-mix(in srgb, var(--bg-color-1) 40%, var(--card-bg-1) 60%);
            border: 1px solid var(--border-color-1);
        }

        .mn-process-icon {
            width: 64px;
            height: 64px;
            border-radius: 999px;
            display: grid;
            place-items: center;
            border: 2px solid color-mix(in srgb, var(--primary-color-1) 60%, var(--border-color-1));
            background: color-mix(in srgb, var(--primary-color-1) 18%, transparent);
            color: var(--primary-color-1);
            font-size: 1.5rem;
        }

        .mn-process-step h4 {
            margin: 0.5rem 0 0 0;
            font-weight: 900;
            color: var(--text-color-1);
        }

        .mn-process-step p {
            margin: 0.2rem 0 0 0;
            color: var(--text-secondary-1);
            font-size: 0.92rem;
            line-height: 1.35;
        }

        .mn-process-arrow {
            flex: 0 0 56px;
            display: grid;
            place-items: center;
            color: color-mix(in srgb, var(--primary-color-1) 60%, var(--text-secondary-1));
            position: relative;
        }

        .mn-process-arrow::before {
            content: "";
            position: absolute;
            left: 8px;
            right: 8px;
            top: 50%;
            height: 2px;
            background: color-mix(in srgb, var(--border-color-1) 55%, var(--primary-color-1));
            opacity: 0.9;
        }

        .mn-process-arrow i {
            position: relative;
            z-index: 1;
            background: var(--card-bg-1);
            border: 1px solid var(--border-color-1);
            width: 34px;
            height: 34px;
            border-radius: 999px;
            display: grid;
            place-items: center;
        }

        @media (max-width: 992px) {
            .mn-process-track {
                flex-direction: column;
            }
            .mn-process-arrow {
                flex-basis: auto;
                height: 44px;
            }
            .mn-process-arrow::before {
                left: 50%;
                right: auto;
                top: 8px;
                bottom: 8px;
                width: 2px;
                height: auto;
            }
            .mn-process-arrow i {
                transform: rotate(90deg);
            }
        }

        /* Prominent CTA for non-techy admins */
        .mn-cta {
            border: 1px solid color-mix(in srgb, var(--primary-color-1) 28%, var(--border-color-1));
            border-radius: 16px;
            background: color-mix(in srgb, var(--card-bg-1) 82%, transparent);
            padding: 1rem 1.25rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 1rem;
            margin: 0 0 1.25rem;
            box-shadow: 0 8px 18px rgba(15, 23, 42, 0.1);
        }

        .mn-cta-title {
            font-weight: 950;
            color: var(--text-color-1);
            font-size: 1.05rem;
        }

        .mn-cta-sub {
            margin-top: 0.25rem;
            color: var(--text-secondary-1);
            font-size: 0.92rem;
        }

        .mn-cta .btn.btn-primary {
            padding: 0.9rem 1.1rem;
            border-radius: 14px;
            font-weight: 900;
            box-shadow: 0 6px 16px color-mix(in srgb, var(--primary-color-1) 24%, transparent);
        }

        @media (max-width: 768px) {
            .mn-cta {
                align-items: flex-start;
                flex-direction: column;
            }
        }

        /* Starter templates */
        .mn-templates {
            border: 1px solid var(--border-color-1);
            border-radius: 14px;
            background: color-mix(in srgb, var(--card-bg-1) 78%, transparent);
            padding: 1rem;
            margin: 0 0 1.25rem;
        }

        .mn-templates-head {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 1rem;
            flex-wrap: wrap;
            margin-bottom: 0.75rem;
        }

        .mn-templates-title {
            display: flex;
            align-items: center;
            gap: 0.6rem;
            font-weight: 900;
            color: var(--text-color-1);
        }

        .mn-template-grid {
            display: grid;
            grid-template-columns: repeat(3, minmax(0, 1fr));
            gap: 1rem;
        }

        .mn-template {
            border: 1px solid var(--border-color-1);
            border-radius: 14px;
            padding: 1rem;
            background: color-mix(in srgb, var(--bg-color-1) 50%, var(--card-bg-1) 50%);
            display: grid;
            gap: 0.5rem;
        }

        .mn-template-name {
            font-weight: 900;
            color: var(--text-color-1);
            display: flex;
            align-items: center;
            gap: 0.6rem;
        }

        .mn-template-name i {
            color: var(--primary-color-1);
        }

        .mn-template-desc {
            color: var(--text-secondary-1);
            font-size: 0.9rem;
            line-height: 1.35;
        }

        @media (max-width: 992px) {
            .mn-template-grid { grid-template-columns: 1fr; }
        }

        @media (max-width: 992px) {
            .mn-mini-analytics { grid-template-columns: repeat(2, minmax(0, 1fr)); }
        }

        .progress-container {
            width: 100%;
            background-color: var(--bg-color-1);
            border-radius: 10px;
            height: 6px;
            margin-top: 8px;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background-color: var(--primary-color-1);
            border-radius: 10px;
            transition: width 0.5s ease;
        }

        /* Select2 Customization */
        .select2-container--default .select2-selection--single {
            height: 42px;
            padding: 6px;
            border: 1px solid var(--border-color-1);
            border-radius: 8px;
            background-color: var(--bg-color-1);
        }

        [data-theme="dark"] .select2-container--default .select2-selection--single {
            background-color: color-mix(in srgb, var(--bg-color-1) 50%, var(--card-bg-1) 50%);
        }
        
        .select2-container--default .select2-selection--single .select2-selection__arrow {
            height: 40px;
        }
        
        .select2-container--default .select2-selection--single .select2-selection__rendered {
            color: var(--text-color-1);
            line-height: 28px;
        }
        
        .select2-dropdown {
            background-color: var(--card-bg-1);
            border: 1px solid var(--border-color-1);
        }
        
        .select2-container--default .select2-results__option--highlighted[aria-selected] {
            background-color: var(--primary-color-1);
        }

        /* Data Table Improvements */
        .data-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .data-table th, .data-table td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid var(--border-color-1);
        }
        
        .data-table th {
            background-color: var(--bg-color-1);
            font-weight: 600;
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--text-secondary-1);
        }
        
        .data-table tr:hover {
            background-color: rgba(0,0,0,0.02);
        }

        [data-theme="dark"] .data-table tr:hover {
            background-color: rgba(255,255,255,0.03);
        }

        .badge {
            padding: 0.35rem 0.65rem;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            display: inline-block;
        }
        
        .badge.completed { background: rgba(46, 204, 113, 0.15); color: #2ecc71; }
        .badge.failed { background: rgba(231, 76, 60, 0.15); color: #e74c3c; }
        .badge.sending { background: rgba(243, 156, 18, 0.15); color: #f39c12; }

        /* ===================================
           Map Picker (Quezon City) Modal
           =================================== */
        .mn-map-modal .modal-content {
            max-width: 980px;
            width: min(980px, 94vw);
        }
        .mn-map-shell {
            display: grid;
            grid-template-columns: 1fr 320px;
            gap: 1rem;
        }
        @media (max-width: 980px) {
            .mn-map-shell { grid-template-columns: 1fr; }
        }
        #mnMap {
            height: 460px;
            border-radius: 12px;
            border: 1px solid var(--border-color-1);
            overflow: hidden;
            background: color-mix(in srgb, var(--bg-color-1) 72%, transparent);
        }
        .mn-map-results {
            max-height: 220px;
            overflow: auto;
            border: 1px solid var(--border-color-1);
            border-radius: 12px;
            background: var(--card-bg-1);
            padding: 0.35rem;
        }
        .mn-map-result {
            padding: 0.6rem 0.7rem;
            border-radius: 10px;
            cursor: pointer;
            color: var(--text-color-1);
            transition: background-color var(--mn-t) var(--mn-ease);
        }
        .mn-map-result:hover {
            background: color-mix(in srgb, var(--primary-color-1) 12%, transparent);
        }
        .mn-coords {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.6rem;
            font-size: 0.92rem;
            color: var(--text-secondary-1);
        }
        .mn-coords strong { color: var(--text-color-1); font-weight: 800; }

        @media (max-width: 992px) {
            .dispatch-grid { grid-template-columns: 1fr; }
        }
    
