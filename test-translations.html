<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Translation System Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-section {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .language-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin: 20px 0;
        }
        .language-buttons button {
            padding: 10px 20px;
            border: none;
            background: #4c8a89;
            color: white;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
        }
        .language-buttons button:hover {
            background: #3d6f6e;
        }
        .language-buttons button.active {
            background: #2d5f5e;
            font-weight: bold;
        }
        .test-content {
            margin-top: 20px;
            padding: 20px;
            background: #f9f9f9;
            border-radius: 6px;
        }
        .debug-info {
            background: #1e1e1e;
            color: #00ff00;
            padding: 15px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            max-height: 400px;
            overflow-y: auto;
        }
        .success { color: #4caf50; }
        .error { color: #f44336; }
        .info { color: #2196f3; }
    </style>
    <script src="USERS/js/translations.js"></script>
</head>
<body>
    <div class="test-section">
        <h1>üåç Translation System Test Page</h1>
        <p>This page tests the translation system. Click a language button to switch languages.</p>
        
        <div class="language-buttons" id="languageButtons">
            <button onclick="testLanguage('en')">üá∫üá∏ English</button>
            <button onclick="testLanguage('fil')">üáµüá≠ Filipino</button>
            <button onclick="testLanguage('es')">üá™üá∏ Spanish</button>
            <button onclick="testLanguage('zh')">üá®üá≥ Chinese</button>
            <button onclick="testLanguage('ja')">üáØüáµ Japanese</button>
        </div>
        
        <div class="test-content">
            <h2 data-translate="home.title">QUEZON CITY EMERGENCY COMMUNICATION PORTAL</h2>
            <p><strong data-translate="home.mission">Mission:</strong> <span data-translate="home.mission.text">To operationalize an effective, efficient, and inclusive DRRM system dedicated to Resilience-building in Quezon City communities.</span></p>
            <p><strong data-translate="home.vision">Vision:</strong> <span data-translate="home.vision.text">A global mode of excellence in Disaster Risk Reduction and Management for its cohesive DRRM system fostering a Sustainable, Future-ready, and Resilient Quezon City.</span></p>
            
            <h3 data-translate="home.services.title">Services</h3>
            <ul>
                <li><strong data-translate="home.services.mass">Mass Notifications</strong> - <span data-translate="home.services.mass.desc">City-wide alerts sent via SMS, email, and online channels for urgent incidents and advisories.</span></li>
                <li><strong data-translate="home.services.multilingual">Multilingual Alerts</strong> - <span data-translate="home.services.multilingual.desc">Important messages can be delivered in multiple languages to reach more communities.</span></li>
            </ul>
        </div>
    </div>
    
    <div class="test-section">
        <h2>üîç Debug Information</h2>
        <button onclick="runDiagnostics()" style="padding: 10px 20px; background: #2196f3; color: white; border: none; border-radius: 6px; cursor: pointer;">
            Run Diagnostics
        </button>
        <div id="debugOutput" class="debug-info" style="margin-top: 15px;">
            <div>Waiting for diagnostics...</div>
        </div>
    </div>
    
    <script>
        function testLanguage(code) {
            console.log(`Testing language: ${code}`);
            if (typeof setLanguage === 'function') {
                setLanguage(code);
                updateActiveButton(code);
                logDebug(`‚úì Language switched to: ${code}`, 'success');
            } else {
                logDebug('‚úó setLanguage function not found!', 'error');
            }
        }
        
        function updateActiveButton(code) {
            document.querySelectorAll('.language-buttons button').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
        }
        
        function logDebug(message, type = 'info') {
            const output = document.getElementById('debugOutput');
            const timestamp = new Date().toLocaleTimeString();
            const colorClass = type === 'success' ? 'success' : type === 'error' ? 'error' : 'info';
            output.innerHTML += `<div class="${colorClass}">[${timestamp}] ${message}</div>`;
            output.scrollTop = output.scrollHeight;
        }
        
        function runDiagnostics() {
            const output = document.getElementById('debugOutput');
            output.innerHTML = '<div class="info">Running diagnostics...</div>';
            
            setTimeout(() => {
                // Check if functions exist
                logDebug('=== FUNCTION AVAILABILITY ===', 'info');
                logDebug(`getCurrentLanguage: ${typeof getCurrentLanguage !== 'undefined' ? '‚úì Available' : '‚úó Missing'}`, 
                    typeof getCurrentLanguage !== 'undefined' ? 'success' : 'error');
                logDebug(`setLanguage: ${typeof setLanguage !== 'undefined' ? '‚úì Available' : '‚úó Missing'}`, 
                    typeof setLanguage !== 'undefined' ? 'success' : 'error');
                logDebug(`applyTranslations: ${typeof applyTranslations !== 'undefined' ? '‚úì Available' : '‚úó Missing'}`, 
                    typeof applyTranslations !== 'undefined' ? 'success' : 'error');
                
                // Check current language
                logDebug('=== CURRENT STATE ===', 'info');
                if (typeof getCurrentLanguage !== 'undefined') {
                    const currentLang = getCurrentLanguage();
                    logDebug(`Current Language: ${currentLang}`, 'success');
                    logDebug(`LocalStorage Value: ${localStorage.getItem('preferredLanguage')}`, 'info');
                    logDebug(`HTML data-lang: ${document.documentElement.getAttribute('data-lang')}`, 'info');
                } else {
                    logDebug('Cannot check current language - function missing', 'error');
                }
                
                // Check translations object
                logDebug('=== TRANSLATIONS DATA ===', 'info');
                if (typeof translations !== 'undefined') {
                    logDebug(`Available Languages: ${Object.keys(translations).join(', ')}`, 'success');
                    logDebug(`English Keys: ${Object.keys(translations.en || {}).length}`, 'info');
                    logDebug(`Filipino Keys: ${Object.keys(translations.fil || {}).length}`, 'info');
                } else {
                    logDebug('‚úó Translations object not found!', 'error');
                }
                
                // Check DOM elements
                logDebug('=== DOM ELEMENTS ===', 'info');
                const translateElements = document.querySelectorAll('[data-translate]');
                logDebug(`Elements with [data-translate]: ${translateElements.length}`, 
                    translateElements.length > 0 ? 'success' : 'error');
                
                if (translateElements.length > 0) {
                    logDebug('Sample elements:', 'info');
                    Array.from(translateElements).slice(0, 3).forEach(el => {
                        logDebug(`  - ${el.getAttribute('data-translate')}: "${el.textContent.substring(0, 50)}..."`, 'info');
                    });
                }
                
                // Test translation
                logDebug('=== TRANSLATION TEST ===', 'info');
                if (typeof applyTranslations !== 'undefined') {
                    try {
                        applyTranslations();
                        logDebug('‚úì applyTranslations() executed successfully', 'success');
                    } catch (error) {
                        logDebug(`‚úó Error applying translations: ${error.message}`, 'error');
                    }
                } else {
                    logDebug('‚úó Cannot test - applyTranslations function missing', 'error');
                }
                
                logDebug('=== DIAGNOSTICS COMPLETE ===', 'success');
            }, 100);
        }
        
        // Auto-run diagnostics on load
        window.addEventListener('load', () => {
            setTimeout(runDiagnostics, 500);
        });
    </script>
</body>
</html>

